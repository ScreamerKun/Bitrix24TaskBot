# Описание проекта
Данный контейнер позволяет ставить задачи из бота телеграм в Bitrix24
Почему данный проект был реализован:
1. Любовь сотрудников писать напрямую в личные сообщения сотруднику IT-отдела.
2. При постановке задачи нарушается порядок постановки самой задачи (Сотрудник забыл выставить очередь в которую идет задача, указать верного исполнителя/соисполнителя).
3. Сотрудник не у рабочего места, однако появилась необходимость в срочном порядке поставить задачу.
   
# Возможности
С данным приложением - указанные потребности нивелируются через бота Telegram.
Что умеет данный бот:
1. Перед постановкой задачи пользователь проходит процедуру авторизации по электронной почте, которая зарегистрированна на аккаунт сотрудника в Bitrix24 (После ввода e-mail, бот запросит код авторизации, который в свою очередь отсылается на электронную почту).
2. Определять постановщика задачи после того как он авторизовался и добавлять сотрудника в наблюдатели, т.к. постановщиком крайне рекомендуется поставить сервисную учетную запись, или бота Bitrix24.
3. Пользователь задает заголовок задачи и описание задачи через бота.
4. При постановке задачи задавать крайний срок задачи, либо сотрудник задает его вручну в формате YYYY/MM/DD HH:MM, либо из заготовленных вариантов: "Сегодня 19:00" и "Завтра 19:00".
5. Отправляет уведомления в чат Telegram технической поддержки или IT-отдела и в ЛС постановщику задачи.

# Установка
1. Заранее подготовьте телеграм бота, его токен, ID закрытого чата телеграм, (Создать бота можно через Botfather https://t.me/BotFather, также через него получаем токен бота. Узнать ID закрытого чата Telegram https://pikabu.ru/story/kak_uznat_identifikator_telegram_kanalachatagruppyi_kak_uznat_chat_id_telegram_bez_botov_i_koda_11099278)
2. Заранее подготовьте входящий и исходящий вебхуки Bitrix24
3. Скачиваем через командлет - "git clone https://github.com/ScreamerKun/Bitrix24TaskBot.git", переходим в каталог с исходниками - "cd /Bitrix24TaskBot"
4. Заполните зависимости в файле .env (TOKEN - токен бота телеграм. WEBHOOCK_TOKEN - токен Birtix24. BITRIX24_URL - ОБЯЗАТЕЛЬНО ПОЛНОЙ ССЫЛКОЙ С УКАЗАНИЕМ REST ВЕБХУКА пример: "https://(АдресБитрикс24).ru/rest/(IDСоздателяВебхука)/(ТокенВебхука)/".
5. В самом коде (bot.py) заполняем ID участников в задаче RESPONSIBLE_ID - Исполнитель, CREATED_BY - Постановщик задачи (рекомендую создать сервисную УЗ Вашего корпоративного битрикс24) GROUP_ID - ID группы куда будет поставлена задача. AUDITORS - Наблюдатели задачи. ACCOMPLICES - Соисполнители задачи.
6. Пакуем и запускаем контейнер командлетами "docker build -t bitrix24bot", "docker run --env-file .env -d --name bitrix24bot bitrix24bot"
